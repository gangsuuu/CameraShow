{
  "version": 3,
  "sources": ["../../three/examples/jsm/helpers/VertexNormalsHelper.js"],
  "sourcesContent": ["import {\r\n\tBufferGeometry,\r\n\tFloat32BufferAttribute,\r\n\tLineSegments,\r\n\tLineBasicMaterial,\r\n\tMatrix3,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _v1 = new Vector3();\r\nconst _v2 = new Vector3();\r\nconst _normalMatrix = new Matrix3();\r\n\r\nclass VertexNormalsHelper extends LineSegments {\r\n\r\n\tconstructor( object, size = 1, color = 0xff0000 ) {\r\n\r\n\t\tconst geometry = new BufferGeometry();\r\n\r\n\t\tconst nNormals = object.geometry.attributes.normal.count;\r\n\t\tconst positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\r\n\r\n\t\tgeometry.setAttribute( 'position', positions );\r\n\r\n\t\tsuper( geometry, new LineBasicMaterial( { color, toneMapped: false } ) );\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.size = size;\r\n\t\tthis.type = 'VertexNormalsHelper';\r\n\r\n\t\t//\r\n\r\n\t\tthis.matrixAutoUpdate = false;\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\t_normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tconst matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tconst position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tconst objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry ) {\r\n\r\n\t\t\tconst objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tconst objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tlet idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( let j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t_v1.fromBufferAttribute( objPos, j ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t_v2.fromBufferAttribute( objNorm, j );\r\n\r\n\t\t\t\t_v2.applyMatrix3( _normalMatrix ).normalize().multiplyScalar( this.size ).add( _v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, _v1.x, _v1.y, _v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, _v2.x, _v2.y, _v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.geometry.dispose();\r\n\t\tthis.material.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { VertexNormalsHelper };\r\n"],
  "mappings": ";;;;;;;;;;AASA,IAAM,MAAM,IAAI,QAAQ;AACxB,IAAM,MAAM,IAAI,QAAQ;AACxB,IAAM,gBAAgB,IAAI,QAAQ;AAElC,IAAM,sBAAN,cAAkC,aAAa;AAAA,EAE9C,YAAa,QAAQ,OAAO,GAAG,QAAQ,UAAW;AAEjD,UAAM,WAAW,IAAI,eAAe;AAEpC,UAAM,WAAW,OAAO,SAAS,WAAW,OAAO;AACnD,UAAM,YAAY,IAAI,uBAAwB,WAAW,IAAI,GAAG,CAAE;AAElE,aAAS,aAAc,YAAY,SAAU;AAE7C,UAAO,UAAU,IAAI,kBAAmB,EAAE,OAAO,YAAY,MAAM,CAAE,CAAE;AAEvE,SAAK,SAAS;AACd,SAAK,OAAO;AACZ,SAAK,OAAO;AAIZ,SAAK,mBAAmB;AAExB,SAAK,OAAO;AAAA,EAEb;AAAA,EAEA,SAAS;AAER,SAAK,OAAO,kBAAmB,IAAK;AAEpC,kBAAc,gBAAiB,KAAK,OAAO,WAAY;AAEvD,UAAM,cAAc,KAAK,OAAO;AAEhC,UAAM,WAAW,KAAK,SAAS,WAAW;AAI1C,UAAM,cAAc,KAAK,OAAO;AAEhC,QAAK,aAAc;AAElB,YAAM,SAAS,YAAY,WAAW;AAEtC,YAAM,UAAU,YAAY,WAAW;AAEvC,UAAI,MAAM;AAIV,eAAU,IAAI,GAAG,KAAK,OAAO,OAAO,IAAI,IAAI,KAAO;AAElD,YAAI,oBAAqB,QAAQ,CAAE,EAAE,aAAc,WAAY;AAE/D,YAAI,oBAAqB,SAAS,CAAE;AAEpC,YAAI,aAAc,aAAc,EAAE,UAAU,EAAE,eAAgB,KAAK,IAAK,EAAE,IAAK,GAAI;AAEnF,iBAAS,OAAQ,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI,CAAE;AAE1C,cAAM,MAAM;AAEZ,iBAAS,OAAQ,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI,CAAE;AAE1C,cAAM,MAAM;AAAA,MAEb;AAAA,IAED;AAEA,aAAS,cAAc;AAAA,EAExB;AAAA,EAEA,UAAU;AAET,SAAK,SAAS,QAAQ;AACtB,SAAK,SAAS,QAAQ;AAAA,EAEvB;AAED;",
  "names": []
}
